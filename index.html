<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ุดุงุช ุฃุจู ุฃููุฑ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- SEO -->
  <meta name="description" content="ุดุงุช ุฃุจู ุฃููุฑ - ูููุน ุฏุฑุฏุดุฉ ุนุงูุฉุ ูุฌููุนุงุชุ ุบุฑู ุตูุชูุฉุ ุชุนุงุฑู ูุตุฏุงูุฉุ ุดุงุช ุนุฑุงูู ูุฌุงูู ููุฌููุน.">
  <meta name="keywords" content="ุดุงุช ุฃุจู ุฃููุฑ, ุฏุฑุฏุดุฉ, ุดุงุช ุนุฑุงูู, ุบุฑู ุตูุชูุฉ, ูุฌููุนุงุช, ุชุนุงุฑู, ุตุฏุงูุฉ, ุดุงุช ุนุฑุจู">

  <!-- ููุง ูุจูู ููุฏ ุงูุชุญูู ูู ุฌูุฌู ูู ุญุทูุชู ูุณุชูุจูุงู -->
  <!-- <meta name="google-site-verification" content="XXXX"> -->

  <!-- Font Awesome -->
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- Main CSS -->
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- ุนููุงู ูุฎูู ูุณุงุนุฏ ุฌูุฌู ูููู ุงุณู ุงููููุน -->
  <h1 style="position:absolute; left:-9999px; top:-9999px;">
    ุดุงุช ุฃุจู ุฃููุฑ - ูููุน ุฏุฑุฏุดุฉ ุนุงูุฉุ ูุฌููุนุงุช ูุบุฑู ุตูุชูุฉ
  </h1>

  <!-- ูุงูุฐุฉ ุฅุฏุฎุงู ุงูุงุณู ุฃูู ูุฑุฉ -->
  <div id="nameModal" class="modal">
    <div class="modal-box">
      <div class="title center">๐ ุฃููุงู ุจูู</div>
      <p class="subtitle center">ุงูุชุจ ุงุณูู ุงููู ุฑุงุญ ูุทูุน ูููุงุณ ูู ุดุงุช ุฃุจู ุฃููุฑ</p>
      <div class="input-group">
        <input type="text" id="nameInput" placeholder="ูุซุงู: ุฃุจู ุฃููุฑ">
      </div>
      <p id="nameError" class="error-message"></p>
      <button class="primary-btn full" onclick="enterWithName()">ุฏุฎูู</button>
    </div>
  </div>

  <!-- ูุงูุฐุฉ ุงูููู ุงูุดุฎุตู -->
  <div id="profileModal" class="modal" style="display:none">
    <div class="modal-box small">
      <h3 class="title center">ุงูููู ุงูุดุฎุตู</h3>

      <div class="avatar-wrapper">
        <label for="avatarInput" class="avatar-label">
          <img id="avatarPreview" src="" alt="ุตูุฑุชู" class="avatar-img">
          <span class="avatar-edit"><i class="fa-solid fa-camera"></i></span>
        </label>
        <input type="file" id="avatarInput" accept="image/*" style="display:none">
      </div>

      <div class="input-group">
        <label class="field-label">ุงูุงุณู ูู ุงูุฏุฑุฏุดุฉ:</label>
        <input type="text" id="profileNameInput" placeholder="ุงุณูู">
      </div>

      <p id="profileError" class="error-message"></p>

      <div class="action-buttons">
        <button class="primary-btn" onclick="saveProfile()">ุญูุธ</button>
        <button class="secondary-btn" onclick="closeProfile()">ุฅุบูุงู</button>
      </div>
    </div>
  </div>

  <!-- ุงูุชุทุจูู ุงูุฑุฆูุณู -->
  <div id="app" class="app" style="display:none">

    <!-- ููุฏุฑ -->
    <header class="main-header">
      <div class="left">
        <button class="icon-btn" onclick="handleBack()">
          <i class="fa-solid fa-arrow-right"></i>
        </button>
      </div>
      <div class="center">
        <div class="app-title">ุดุงุช ุฃุจู ุฃููุฑ</div>
        <div id="headerSubtitle" class="app-subtitle">ุงููุงุฌูุฉ ุงูุฑุฆูุณูุฉ</div>
      </div>
      <div class="right">
        <button class="icon-btn" onclick="openProfile()">
          <i class="fa-solid fa-user"></i>
        </button>
      </div>
    </header>

    <!-- ุงููุญุชูู -->
    <main class="main-content">

      <!-- ุดุงุดุฉ ุงูุจุฏุงูุฉ -->
      <section id="homeScreen" class="screen active">
        <div class="home-cards">
          <button class="home-card" onclick="openRoom('MainRoom','ุงูุฏุฑุฏุดุฉ ุงูุนุงูุฉ','ุงูุบุฑูุฉ ุงูุฑุฆูุณูุฉ')">
            <i class="fa-solid fa-comments home-icon"></i>
            <div>
              <div class="home-title">ุงูุฏุฑุฏุดุฉ ุงูุนุงูุฉ</div>
              <div class="home-sub">ุดุงุช ุฃุจู ุฃููุฑ โ ูู ุงููุงุณ ุชุดูู ุงูุฑุณุงุฆู</div>
            </div>
          </button>

          <button class="home-card" onclick="openUsersScreen()">
            <i class="fa-solid fa-users home-icon"></i>
            <div>
              <div class="home-title">ุงููุณุชุฎุฏููู</div>
              <div class="home-sub">ูู ุดุฎุต ุฏุงุฎู ุงูุชุทุจูู</div>
            </div>
          </button>

          <button class="home-card" onclick="openGroupsScreen()">
            <i class="fa-solid fa-layer-group home-icon"></i>
            <div>
              <div class="home-title">ุงููุฌููุนุงุช</div>
              <div class="home-sub">ุชุนุงุฑู โ ุฃูุนุงุจ โ ุณูุงูู โ ุตูุฑ ูุถุญูุฉ</div>
            </div>
          </button>

          <button class="home-card" onclick="openVoiceRoomsScreen()">
            <i class="fa-solid fa-headset home-icon"></i>
            <div>
              <div class="home-title">ุงูุบุฑู ุงูุตูุชูุฉ</div>
              <div class="home-sub">ุฑููุงุช ุตูุชูุฉ + ุดุงุช ููู ุฑูู</div>
            </div>
          </button>
        </div>
      </section>

      <!-- ุดุงุดุฉ ุงูุดุงุช -->
      <section id="chatScreen" class="screen">
        <div class="chat-header-row">
          <div class="chat-info">
            <div id="chatTitle" class="chat-title">ุดุงุช ุฃุจู ุฃููุฑ</div>
            <div id="chatRoomLabel" class="chat-room-label">ุงูุบุฑูุฉ ุงูุฑุฆูุณูุฉ</div>
          </div>
        </div>

        <!-- ุดุฑูุท ุงููุงููุงุช ุงููุฏูู (ูุฎูู ุญุงููุงู) -->
        <div id="voiceMicsBar" class="voice-mics" style="display:none;">
          <div class="mic-slot">
            <button class="mic-circle" onclick="handleMicClick(1)">
              <i class="fa-solid fa-microphone-lines"></i>
            </button>
            <span class="mic-name">ูุงูู 1</span>
          </div>
          <div class="mic-slot">
            <button class="mic-circle" onclick="handleMicClick(2)">
              <i class="fa-solid fa-microphone-lines"></i>
            </button>
            <span class="mic-name">ูุงูู 2</span>
          </div>
          <div class="mic-slot">
            <button class="mic-circle" onclick="handleMicClick(3)">
              <i class="fa-solid fa-microphone-lines"></i>
            </button>
            <span class="mic-name">ูุงูู 3</span>
          </div>
          <div class="mic-slot">
            <button class="mic-circle" onclick="handleMicClick(4)">
              <i class="fa-solid fa-microphone-lines"></i>
            </button>
            <span class="mic-name">ูุงูู 4</span>
          </div>
          <div class="mic-slot">
            <button class="mic-circle" onclick="handleMicClick(5)">
              <i class="fa-solid fa-microphone-lines"></i>
            </button>
            <span class="mic-name">ูุงูู 5</span>
          </div>
        </div>

        <div id="messagesList" class="messages-area"></div>

        <div class="input-area">
          <input type="file" id="imgInput" accept="image/*" style="display:none">
          <button class="icon-btn" onclick="document.getElementById('imgInput').click()">
            <i class="fa-solid fa-camera"></i>
          </button>

          <button id="micBtn" class="icon-btn" onclick="toggleRecording()">
            <i class="fa-solid fa-microphone"></i>
          </button>

          <input type="text" id="msgInput" placeholder="ุงูุชุจ ุฑุณุงูุฉ..." autocomplete="off">
          <button class="send-btn" onclick="sendMessage()">
            <i class="fa-solid fa-paper-plane"></i>
          </button>
        </div>
      </section>

      <!-- ุดุงุดุฉ ุงููุณุชุฎุฏููู -->
      <section id="usersScreen" class="screen">
        <h2 class="section-title">ุงููุณุชุฎุฏููู</h2>
        <p class="section-hint">ุงุถุบุท ุนูู ุฃู ูุณุชุฎุฏู ููุชุญ ุฏุฑุฏุดุฉ ุฎุงุตุฉ ูุนู.</p>
        <div id="usersList" class="users-list"></div>
      </section>

      <!-- ุดุงุดุฉ ุงููุฌููุนุงุช -->
      <section id="groupsScreen" class="screen">
        <h2 class="section-title">ุงููุฌููุนุงุช</h2>
        <p class="section-hint">ุงุฎุชุฑ ูุฌููุนุฉ ููุชุญ ุดุงุช ุฎุงุต ุจูุง.</p>
        <div class="groups-list">
          <button class="group-item" onclick="openRoom('group_taarof','ูุฌููุนุฉ ุชุนุงุฑู ุดุจุงุจ ูุจูุงุช','ุชุนุงุฑู ุดุจุงุจ ูุจูุงุช')">
            <i class="fa-solid fa-heart"></i>
            <div>
              <h3>ูุฌููุนุฉ ุชุนุงุฑู ุดุจุงุจ ูุจูุงุช</h3>
              <p>ุชุนุงุฑู ูุญุชุฑู ููุฌููุน โจ</p>
            </div>
          </button>

          <button class="group-item" onclick="openRoom('group_games','ูุฌููุนุฉ ุฃูุนุงุจ','ุชุญุฏูุงุช ูุฃูุนุงุจ')">
            <i class="fa-solid fa-gamepad"></i>
            <div>
              <h3>ูุฌููุนุฉ ุฃูุนุงุจ</h3>
              <p>ุชุญุฏูุงุชุ ูุณุงุจูุงุชุ ูููุงุณุฉ ๐ฎ</p>
            </div>
          </button>

          <button class="group-item" onclick="openRoom('group_swalif','ูุฌููุนุฉ ุณูุงูู','ุณูุงูู ูุถุญู')">
            <i class="fa-solid fa-mug-hot"></i>
            <div>
              <h3>ูุฌููุนุฉ ุณูุงูู</h3>
              <p>ูุนุฏุฉ ุณูุงูู ุฎูููุฉ โ</p>
            </div>
          </button>

          <button class="group-item" onclick="openRoom('group_friends','ูุฌููุนุฉ ุตุฏุงูุฉ','ูููู ุฃุตุฏูุงุก ุฌุฏุฏ')">
            <i class="fa-solid fa-handshake"></i>
            <div>
              <h3>ูุฌููุนุฉ ุตุฏุงูุฉ</h3>
              <p>ุตุฏุงูุงุช ุฌุฏูุฏุฉ ููุญุชุฑูุฉ ๐ค</p>
            </div>
          </button>

          <button class="group-item" onclick="openRoom('group_funny','ูุฌููุนุฉ ุตูุฑ ูุถุญูุฉ','ูููุฒ ูุถุญู')">
            <i class="fa-solid fa-face-grin-squint-tears"></i>
            <div>
              <h3>ูุฌููุนุฉ ุตูุฑ ูุถุญูุฉ</h3>
              <p>ุตูุฑ ูููุงุทุน ูุถุญูุฉ ููุฌููุน ๐</p>
            </div>
          </button>
        </div>
      </section>

      <!-- ุดุงุดุฉ ุงูุฑููุงุช ุงูุตูุชูุฉ -->
      <section id="voiceRoomsScreen" class="screen">
        <div class="voice-header-row">
          <div class="section-title">ุงูุบุฑู ุงูุตูุชูุฉ</div>
          <div class="section-hint small">ุฑููุงุช + ุดุงุช ููู ุฑูู</div>
        </div>

        <!-- ุฒุฑ ูุฏุฎู ุนูู ุตูุญุฉ ุงูุฑูู ุงูุณุงูุจุฑ ุจุงูู -->
        <button class="create-room-btn"
                onclick="goToVoiceRoom('room_cyber_1','ุฑูู ุตูุชู โ ุดุงุช ุฃุจู ุฃููุฑ (Cyberpunk)')">
          <span><i class="fa-solid fa-plus"></i> ุฏุฎูู ุฑูู ุตูุชู Cyberpunk</span>
        </button>

        <div class="voice-tabs">
          <button class="voice-tab active" data-filter="all">ุงููู</button>
          <button class="voice-tab" data-filter="taarof">ุชุนุงุฑู</button>
          <button class="voice-tab" data-filter="games">ุฃูุนุงุจ</button>
          <button class="voice-tab" data-filter="swalif">ุณูุงูู</button>
          <button class="voice-tab" data-filter="friends">ุตุฏุงูุฉ</button>
        </div>

        <div id="voiceRoomsList" class="rooms-list"></div>
      </section>

    </main>
  </div>

  <!-- Toast ุฅุดุนุงุฑ ุงููุงูู -->
  <div id="micToast" class="toast" style="display:none;">
    <div class="toast-content">
      <div class="toast-icon">
        <i class="fa-solid fa-microphone-lines"></i>
      </div>
      <div class="toast-text">
        <div class="toast-title">ุงููููุฑูููู ุงูุตูุชู ูุฑูุจุงู</div>
        <div class="toast-subtitle">ุญุงููุงู ูุชุงุญุฉ ุงูุฏุฑุฏุดุฉ ุงููุตูุฉ ุฏุงุฎู ุงูุฑูู ููุท. ๐</div>
      </div>
      <button class="toast-close" onclick="hideMicToast()">
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>
  </div>

  <!-- ุฏุงูุฉ ุงูุฑุจุท ูุน ุตูุญุฉ ุงูุฑูู ุงูุณุงูุจุฑ ุจุงูู -->
  <script>
    function goToVoiceRoom(roomId, roomName) {
      const url =
        "voice-room-cyberpunk.html"
        + "?roomId=" + encodeURIComponent(roomId)
        + "&roomName=" + encodeURIComponent(roomName || "");
      window.location.href = url;
    }
  </script>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

  <!-- ููุฏ ุงูุชุทุจูู -->
  <script src="app.js"></script>
</body>
</html>
